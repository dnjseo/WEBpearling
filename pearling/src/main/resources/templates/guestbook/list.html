<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" 
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{inc/layout}">

<head>
    <link href="/css/guestbook/guestbook.css" type="text/css" rel="stylesheet">
    <link href="/css/header/guestbook.css" type="text/css" rel="stylesheet">
    <script src="/js/guestbook/list.js"></script>
    <title>방명록</title>
</head>

<body>
    <main layout:fragment="content" id="wrap" class="wrap guestbook">
        <div class="img-list">
            <!-- <h1><img src="/images/guestbook/count3.png" ><span th:text="${#lists.size(list)}">개</span><img src="/images/guestbook/count3.png" ></h1> -->
            <ul class="clam" id="clam-list">
                <li th:each="g, stat : ${list}" th:data-index="${stat.index}" th:data-id="${g.id}">
                    <img alt="Clam Image" 
                    data-aos="zoom-in" data-aos-duration="1500"/>         
                </li>
            </ul>
        </div>

        <p><a class="plus" th:href="@{/guestbook/post/{id}(id=${userId}, s=false)}">+</a></p>

        <section th:each="g, stat : ${list}" th:id="'b' + ${stat.index}"
            th:class="'guestbook guestbook-' + ${stat.index}" th:data-id="${g.id}">
            <h1 class="d-none">방명록</h1>
            <div class="book">
                <div class="pearl">
                    <p th:text="${g.content}"></p>
                </div>
                <div class="underline">
                    <p class="date" th:text="${#dates.format(g.regdate, 'yyyy-MM-dd')}">2023/12/21</p>
                    <p class="updateBtn"><a th:href="@{/guestbook/post/{id}(id=${userId}, s=true, gid=${g.id})}">수정</a></p> <!-- 수정 버튼 클릭 시 링크에 방명록 ID 포함 -->
                    <p class="btn deleteBtn">삭제</p>
                    <p id="from-id" type="hidden" th:text="${g.fromId}"></p>
                </div>
            </div>
            <p class="guestbook-close">x</p>
        </section>

        <!-- 뒤에 배경 어둡게 하기 -->
        <div class="black"></div>
        <!-- alert창 ------------------------------->
        <div id="delete-modal" class="modal">
            <div class="modal-content">
                <p>🫧 Message</p>
                <p>방명록 삭제가 완료되었습니다.</p>
                <button class="delete-yes">확인</button>
            </div>
        </div>
        <input id="input-member-id" type="hidden" th:value="${#authentication.principal.id}">
        <input id="input-user-id" type="hidden" th:value="${userId}">
    </main>
</body>
</html>