<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" 
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
    layout:decorate="~{inc/layout}">

<head>
    <link href="/css/guestbook/guestbook.css" type="text/css" rel="stylesheet">
    <link href="/css/header/guestbook.css" type="text/css" rel="stylesheet">
    <script src="/js/guestbook/list.js"></script>
    <title>Pearl-ing ë°©ëª…ë¡</title>
</head>

<body>
    <main layout:fragment="content" id="wrap" class="wrap guestbook">
        <div class="img-list">
            <ul class="clam" id="clam-list">
                <li th:each="g, stat : ${list}" th:data-index="${stat.index}" th:data-id="${g.id}">
                    <img alt="Clam Image" 
                    data-aos="zoom-in" data-aos-duration="1500"/>
                    <p class="lock"><img src="/images/guestbook/lock.svg" alt="ì ê¸ˆì•„ì´ì½˜"></p>         
                </li>
            </ul>

            <!-- í˜ì´ì§• ì²˜ë¦¬ -->
            <div class="pagination">
                <ul class="my-paging">
                <li>
                    <a href="#" id="previous-page">&lt;&lt;</a>
                </li>
                <li th:each="page, i : ${#numbers.sequence(1, totalPages)}">
                    <a th:href="@{/guestbook/list(uid=${userId}, page=${page})}"
                    th:class="${currentPage == page ? 'active' : ''}"
                    th:text="${page}"
                    data-page="${page}"></a>
                </li>
                <li>
                    <a href="#" id="next-page">&gt;&gt;</a>
                </li>
                </ul>

                <!-- ì¹œêµ¬ìš© -->
                <ul class="friend-paging">
                    <li>
                        <a href="#" id="previous-page2">&lt;&lt;</a>
                    </li>
                    <li th:each="page, i : ${#numbers.sequence(1, totalPages)}">
                        <a th:href="@{/guestbook/list/{id}(id=${userId}, page=${page})}"
                        th:class="${currentPage == page ? 'active' : ''}"
                        th:text="${page}"
                        data-page="${page}"
                        ></a>
                    </li>
                    <li>
                        <a href="#" id="next-page2">&gt;&gt;</a>
                    </li>
                </ul>
            </div>
        </div>

        <p><a class="plus" th:href="@{/guestbook/post/{id}(id=${userId}, s=false)}">+</a></p>

        <section th:each="g, stat : ${list}" th:id="'b' + ${stat.index}"
            th:class="'guestbook guestbook-' + ${stat.index}" th:data-id="${g.id}">
            <h1 class="d-none">ë°©ëª…ë¡</h1>
            <div class="book">
                <div class="bar">
                    <p class="number">no.<span th:text="${stat.index} + 1"></span></p>
                    <p class="from-id-nickname" th:text="${g.fromNickname}"></p>
                    <p>[<span class="date" th:text="${#dates.format(g.regdate, 'yyyy-MM-dd')}"></span>]</p>
                    <div class="btn-zip">
                        <p class="btn updateBtn"><a th:href="@{/guestbook/post/{id}(id=${userId}, s=true, gid=${g.id})}">ìˆ˜ì •</a></p> <!-- ìˆ˜ì • ë²„íŠ¼ í´ë¦­ ì‹œ ë§í¬ì— ë°©ëª…ë¡ ID í¬í•¨ -->
                        <p class="btn deleteBtn">ì‚­ì œ</p>
                        <p class="guestbook-close">x</p>
                    </div>
                </div>
                <div class="pearl">
                    <p th:text="${g.content}"></p>
                </div>
                <p id="from-id" class="from-id-hidden" type="hidden" th:text="${g.fromId}"></p>
            </div>
        </section>

        <!-- ë’¤ì— ë°°ê²½ ì–´ë‘¡ê²Œ í•˜ê¸° -->
        <div class="black"></div>
        <!-- alertì°½ ------------------------------->
        <div id="delete-modal" class="modal">
            <div class="modal-content">
                <p>ğŸ«§ Message</p>
                <p>ë°©ëª…ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
                <div class="delete-btn">
                    <button class="btn-style delete-no">ì·¨ì†Œ</button>
                    <button class="btn-style delete-yes">í™•ì¸</button>
                </div>
            </div>
        </div>

        <div id="no-show-modal" class="modal">
            <div class="modal-content">
                <p>ğŸ«§ Message</p>
                <p>ë°©ëª…ë¡ì„ ë³¼ ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.</p>
                <button class="btn-style no-show-yes">í™•ì¸</button>
            </div>
        </div>

        <input id="input-member-id" type="hidden" th:value="${#authentication.principal.id}">
        <input id="input-user-id" type="hidden" th:value="${userId}">
        <input id="current-page" type="hidden" th:value="${currentPage}">
    </main>
</body>
</html>
